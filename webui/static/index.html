<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>iTaK</title>
    <link rel="icon" type="image/svg+xml" href="public/favicon.svg">
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="css/messages.css">
    <link rel="stylesheet" href="components/messages/action-buttons/simple-action-buttons.css">
    <link rel="stylesheet" href="components/messages/process-group/process-group.css">
    <link rel="stylesheet" href="css/toast.css">
    <link rel="stylesheet" href="css/settings.css">
    <link rel="stylesheet" href="css/modals.css">
    <link rel="stylesheet" href="css/speech.css">
    <link rel="stylesheet" href="css/scheduler-datepicker.css">
    <link rel="stylesheet" href="css/scheduler.css">
    <link rel="stylesheet" href="css/notification.css">
    <link rel="stylesheet" href="css/buttons.css">
    <link rel="stylesheet" href="css/tables.css">

    <link rel="stylesheet" href="vendor/flatpickr/flatpickr.min.css">
    <script src="vendor/flatpickr/flatpickr.min.js"></script>

    <script>
        globalThis.safeCall = function (name, ...args) {
            if (window[name]) window[name](...args)
        }
    </script>

    <script type="module" src="index.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <script type="module" src="js/initFw.js"></script>

    <script src="vendor/ace-min/ace.js"></script>
    <link href="vendor/ace-min/ace.min.css" rel="stylesheet">
    <link rel="stylesheet" href="vendor/katex/katex.min.css" crossorigin="anonymous">
    <script defer src="vendor/katex/katex.min.js" crossorigin="anonymous"></script>
    <script defer src="vendor/katex/katex.auto-render.min.js" crossorigin="anonymous"></script>
    <script src="vendor/qrcode.min.js"></script>
    <link rel="stylesheet" href="vendor/google/google-icons.css" />
    <link rel="manifest" href="js/manifest.json">

    <script>
        globalThis.gitinfo = { version: "iTaK", commit_time: "" };
        globalThis.runtimeInfo = {
            ...(globalThis.runtimeInfo || {}),
            id: "itak-webui",
            isDevelopment: false,
            loggedIn: true,
        };
    </script>
</head>

<body class="dark-mode device-pointer" x-data>
    <div class="container">
        <div id="sidebar-overlay" x-data>
            <template x-if="$store.sidebar">
                <div class="sidebar-overlay" :class="{'visible': $store.sidebar.isOpen && $store.sidebar.isMobile()}" @click="$store.sidebar.close()"></div>
            </template>
        </div>

        <x-component path="sidebar/left-sidebar.html"></x-component>

        <div id="right-panel" class="panel">
            <x-component path="chat/top-section/chat-top.html"></x-component>

            <div x-data x-show="$store.welcomeStore && $store.welcomeStore.isVisible">
                <x-component path="welcome/welcome-screen.html"></x-component>
            </div>

            <div id="chat-history" x-data x-show="!$store.welcomeStore || !$store.welcomeStore.isVisible"></div>

            <div style="position: relative; height: 0;">
                <x-component path="notifications/notification-toast-stack.html"></x-component>
            </div>

            <div id="toast" class="toast">
                <div class="toast__content">
                    <div class="toast__title"></div>
                    <div class="toast__separator"></div>
                    <div class="toast__message"></div>
                </div>
                <button class="toast__copy" style="display: none;">Copy</button>
                <button class="toast__close">Close</button>
            </div>

            <div x-show="!$store.welcomeStore || !$store.welcomeStore.isVisible">
                <x-component path="chat/input/progress.html"></x-component>
                <x-component path="chat/input/chat-bar.html"></x-component>
            </div>
        </div>
    </div>

    <x-component path="chat/attachments/dragDropOverlay.html"></x-component>

    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('js/sw.js').then(registration => {
                    console.log('SW registered: ', registration);
                }).catch(registrationError => {
                    console.log('SW registration failed: ', registrationError);
                });
            });
        }
    </script>
</body>

</html>